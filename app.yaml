runtime: php82
service: default

env_variables:
  DB_HOST: "34.52.242.229"
  DB_NAME: "resto_platform"
  DB_USER: "root"
  DB_PASS: "781155609"
  BASE_URL: "https://sencommandes.ew.r.appspot.com/"
  IMG_BASE_PATH: "assets/img/"

handlers:
  # Servir les fichiers PHP directement
  - url: /(.+\.php)$
    script: \1
    secure: always

  # Servir les fichiers CSS, JS, images directement
  - url: /(.+\.(gif|png|jpg|jpeg|css|js|ico|webp|svg))$
    static_files: \1
    upload: .+\.(gif|png|jpg|jpeg|css|js|ico|webp|svg)$

  # Servir le dossier assets complet
  - url: /assets
    static_dir: assets

  # Servir le dossier uploads complet
  - url: /uploads
    static_dir: uploads

  # Redirection pour les anciens chemins (compatibilité)
  - url: /resto_plateform/assets/(.*)
    static_files: assets/\1
    upload: assets/.*

  # Toutes les autres URLs sont gérées par index.php (pour le routing SPA si nécessaire)
  - url: /.*
    script: auto
    secure: always
